Version 4
SHEET 1 2280 720
WIRE -48 -704 -48 -736
WIRE 864 -640 864 -656
WIRE 880 -640 864 -640
WIRE -48 -608 -48 -624
WIRE 0 -608 -48 -608
WIRE -48 -592 -48 -608
WIRE 880 -592 880 -640
WIRE 880 -592 864 -592
WIRE 0 -576 0 -608
WIRE 32 -576 0 -576
WIRE -672 -544 -688 -544
WIRE 864 -528 864 -544
WIRE 896 -528 864 -528
WIRE 864 -512 864 -528
WIRE 880 -512 864 -512
WIRE -48 -480 -48 -496
WIRE 880 -464 880 -512
WIRE 880 -464 864 -464
WIRE 864 -384 864 -416
WIRE 880 -384 864 -384
WIRE 544 -368 480 -368
WIRE 704 -368 640 -368
WIRE 816 -368 704 -368
WIRE 704 -352 704 -368
WIRE 880 -336 880 -384
WIRE 880 -336 864 -336
WIRE 144 -320 144 -368
WIRE 704 -272 704 -288
WIRE 864 -272 864 -288
WIRE -48 -240 -48 -272
WIRE 32 -240 -48 -240
WIRE 96 -240 32 -240
WIRE -48 -224 -48 -240
WIRE -832 -208 -832 -224
WIRE -816 -208 -832 -208
WIRE 144 -192 144 -224
WIRE 256 -192 144 -192
WIRE 400 -192 352 -192
WIRE 480 -192 480 -368
WIRE 480 -192 400 -192
WIRE 864 -176 864 -192
WIRE 880 -176 864 -176
WIRE 1312 -176 1312 -192
WIRE 1328 -176 1312 -176
WIRE 1488 -176 1488 -192
WIRE 1504 -176 1488 -176
WIRE 1680 -176 1680 -192
WIRE 1696 -176 1680 -176
WIRE 880 -128 880 -176
WIRE 880 -128 864 -128
WIRE -48 -112 -48 -128
WIRE 16 -112 -48 -112
WIRE 80 -112 16 -112
WIRE 128 -112 80 -112
WIRE -48 -80 -48 -112
WIRE 16 -80 16 -112
WIRE 128 -80 128 -112
WIRE 864 -64 864 -80
WIRE 896 -64 864 -64
WIRE 864 -48 864 -64
WIRE 880 -48 864 -48
WIRE 256 -16 176 -16
WIRE 880 0 880 -48
WIRE 880 0 864 0
WIRE -48 16 -48 -16
WIRE 16 16 16 -16
WIRE 128 16 128 0
WIRE 176 16 176 -16
WIRE 400 16 400 -192
WIRE 864 80 864 48
WIRE 880 80 864 80
WIRE 480 96 480 -192
WIRE 544 96 480 96
WIRE 704 96 640 96
WIRE 816 96 704 96
WIRE 704 112 704 96
WIRE -704 128 -720 128
WIRE 880 128 880 80
WIRE 880 128 864 128
WIRE 400 144 400 112
WIRE 704 192 704 176
WIRE 864 192 864 176
WIRE 912 336 912 320
WIRE 864 352 832 352
WIRE 864 400 832 400
WIRE 912 432 912 416
FLAG -896 128 0
FLAG -800 -544 0
FLAG -800 128 0
FLAG -896 48 Vdd
FLAG -800 -624 Vreset
FLAG -800 48 Vtransfer
FLAG 16 16 0
FLAG -48 16 0
FLAG 128 16 0
FLAG -48 -176 0
FLAG -96 -144 Vtransfer2
FLAG -912 -224 0
FLAG -912 -304 Vrowselect
FLAG -96 -288 Vreset2
FLAG -48 -368 Vdd
FLAG -48 -320 0
FLAG 144 -368 Vdd
FLAG 144 -272 0
FLAG 304 -192 0
FLAG 272 -240 Vrowselect2
FLAG -672 -544 Vreset
FLAG -688 -624 Vreset2
FLAG -704 128 Vtransfer
FLAG -720 48 Vtransfer2
FLAG 80 -112 Vdiodo
FLAG 176 -64 0
FLAG 1216 -192 0
FLAG 1216 -272 Vswcurrent1
FLAG 256 -16 Vswcurrent4
FLAG 1312 -272 Vswcurrent2
FLAG 1328 -176 Vswcurrent1
FLAG 1504 -176 Vswcurrent2
FLAG 1488 -272 Vswcurrent3
FLAG 1696 -176 Vswcurrent3
FLAG 1680 -272 Vswcurrent4
FLAG 32 -240 FD
FLAG 1216 64 0
FLAG 1216 -16 Vsweep
FLAG 256 16 Vsweep
FLAG 592 -368 0
FLAG -896 464 0
FLAG -800 464 0
FLAG 560 -416 Vsamplesignal
FLAG -800 384 Vsamplesignal
FLAG 560 48 Vsamplereset
FLAG -896 384 Vsamplereset
FLAG -816 -208 Vrowselect
FLAG -832 -304 Vrowselect2
FLAG 704 192 0
FLAG 704 -272 0
FLAG 864 192 0
FLAG 864 -272 0
FLAG 864 -192 Vdd
FLAG -704 464 0
FLAG -704 384 Vpol
FLAG 816 -160 Vpol
FLAG 816 -624 Vpol
FLAG 864 -656 Vdd
FLAG -912 -544 0
FLAG -912 -624 Vlectura
FLAG 816 -496 Vlectura
FLAG 816 -32 Vlectura
FLAG 592 96 0
FLAG 912 432 0
FLAG 896 -64 Vr
FLAG 832 352 Vr
FLAG 896 -528 Vs
FLAG 832 400 Vs
FLAG 912 320 out
IOPIN 912 320 Out
FLAG 400 144 0
FLAG 400 64 0
FLAG -48 -736 Vdd
FLAG -48 -480 0
FLAG 352 96 Vespejo
FLAG -48 -544 0
FLAG 448 448 0
FLAG 32 -576 Vespejo
SYMBOL voltage -896 32 R0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage -800 -640 R0
WINDOW 3 -15 159 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 0 1p 1p 'treset1' 'tperiodo' 4)
SYMATTR InstName V2
SYMBOL voltage -800 32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -7 138 Left 2
SYMATTR Value PULSE(0 5 0 1p 1p 'ttransfer1' 'tperiodo' 4)
SYMATTR InstName V3
SYMBOL nmos4 -96 -224 R0
SYMATTR InstName M1
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=1
SYMBOL diode -32 -16 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMBOL cap 0 -80 R0
SYMATTR InstName C1
SYMATTR Value 160f
SYMBOL voltage -912 -320 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -4 136 Left 2
SYMATTR Value PULSE(0 5 'rowselect1' 1p 1p 0.5m 'tperiodo' 4)
SYMATTR InstName V4
SYMBOL nmos4 -96 -368 R0
SYMATTR InstName M2
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=1
SYMBOL nmos4 96 -320 R0
SYMATTR InstName M3
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=7
SYMBOL nmos4 352 -240 R90
SYMATTR InstName M4
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=1
SYMBOL voltage -688 -640 R0
WINDOW 3 -9 186 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 'treset2' 1p 1p 0.25m 'tperiodo' 4)
SYMATTR InstName V5
SYMBOL voltage -720 32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 6 167 Left 2
SYMATTR Value PULSE(0 5 'ttransfer2' 1p 1p 0.5m 'tperiodo' 4)
SYMATTR InstName V6
SYMBOL g 128 16 R180
SYMATTR InstName G1
SYMATTR Value 1
SYMBOL voltage 1216 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -13 142 Left 2
SYMATTR Value PULSE(0 'current1' 0 1p 1p 'tswcurrent' 'tperiodo' 1)
SYMATTR InstName V7
SYMBOL voltage 1312 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -19 172 Left 2
SYMATTR Value PULSE(0 'current2' 5m 1p 1p 'tswcurrent' 'tperiodo' 1)
SYMATTR InstName V8
SYMBOL voltage 1488 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -30 200 Left 2
SYMATTR Value PULSE(0 'current3' 10m 1p 1p 'tswcurrent' 'tperiodo' 1)
SYMATTR InstName V9
SYMBOL voltage 1680 -288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -46 225 Left 2
SYMATTR Value PULSE(0 'current4' 15m 1p 1p 'tswcurrent' 'tperiodo' 1)
SYMATTR InstName V10
SYMBOL voltage 1216 -32 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -3 155 Left 2
SYMATTR Value PULSE(0 'currentsweep' 0 1p 1p 'tswcurrent' 'tperiodo' 1)
SYMATTR InstName V11
SYMBOL nmos4 640 -416 R90
WINDOW 0 63 22 Left 2
SYMATTR InstName M6
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=1
SYMBOL voltage -896 368 R0
WINDOW 3 -48 129 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 'trsampleo' 1p 1p 'tonreset' 5m 4)
SYMATTR InstName V12
SYMBOL voltage -800 368 R0
WINDOW 3 -18 156 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 5 'tssampleo' 1p 1p 'tonsignal' 5ms 4)
SYMATTR InstName V13
SYMBOL voltage -832 -320 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -2 164 Left 2
SYMATTR Value PULSE(0 5 'rowselect2' 1p 1p 0.5m 'tperiodo' 4)
SYMATTR InstName V14
SYMBOL cap 688 112 R0
SYMATTR InstName Creset
SYMATTR Value 1.6p
SYMBOL cap 688 -352 R0
SYMATTR InstName Csignal
SYMATTR Value 1.6p
SYMBOL pmos4 816 -288 M180
WINDOW 3 70 73 Left 2
SYMATTR Value CMOSP
SYMATTR InstName M8
SYMATTR Value2 l='Lmin' w='Wp1' ad='Wp1*Ld' as='Wp1*Ld' pd='2*Wp1+2*Ld' ps='2*Wp1+2*Ld' m=1
SYMBOL pmos4 816 176 M180
WINDOW 3 72 72 Left 2
SYMATTR Value CMOSP
SYMATTR InstName M7
SYMATTR Value2 l='Lmin' w='Wp1' ad='Wp1*Ld' as='Wp1*Ld' pd='2*Wp1+2*Ld' ps='2*Wp1+2*Ld' m=1
SYMBOL pmos4 816 48 M180
WINDOW 3 71 72 Left 2
SYMATTR Value CMOSP
SYMATTR InstName M9
SYMATTR Value2 l='Lmin' w='Wp1' ad='Wp1*Ld' as='Wp1*Ld' pd='2*Wp1+2*Ld' ps='2*Wp1+2*Ld' m=1
SYMBOL pmos4 816 -416 M180
WINDOW 3 70 70 Left 2
SYMATTR Value CMOSP
SYMATTR InstName M10
SYMATTR Value2 l='Lmin' w='Wp1' ad='Wp1*Ld' as='Wp1*Ld' pd='2*Wp1+2*Ld' ps='2*Wp1+2*Ld' m=1
SYMBOL pmos4 816 -80 M180
WINDOW 3 73 72 Left 2
SYMATTR Value CMOSP
SYMATTR InstName M11
SYMATTR Value2 l='Lmin' w='Wp2' ad='Wp2*Ld' as='Wp2*Ld' pd='2*Wp2+2*Ld' ps='2*Wp2+2*Ld' m=1
SYMBOL voltage -704 368 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V15
SYMATTR Value 3
SYMBOL pmos4 816 -544 M180
WINDOW 3 71 73 Left 2
SYMATTR Value CMOSP
SYMATTR InstName M12
SYMATTR Value2 l='Lmin' w='Wp2' ad='Wp2*Ld' as='Wp2*Ld' pd='2*Wp2+2*Ld' ps='2*Wp2+2*Ld' m=1
SYMBOL voltage -912 -640 R0
WINDOW 3 -4 130 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(5 0 'tlectura' 1p 1p 0.2m 5ms 4)
SYMATTR InstName V16
SYMBOL nmos4 640 48 R90
WINDOW 0 63 22 Left 2
SYMATTR InstName M5
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=1
SYMBOL e 912 320 R0
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL nmos4 352 16 R0
WINDOW 0 63 22 Left 2
SYMATTR InstName M13
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=1
SYMBOL nmos4 0 -496 R180
WINDOW 0 63 22 Left 2
SYMATTR InstName M14
SYMATTR Value CMOSN
SYMATTR Value2 l='Lmin' w='W' ad='W*Ld' as='W*Ld' pd='2*W+2*Ld' ps='2*W+2*Ld' m=1
SYMBOL res -64 -720 R0
SYMATTR InstName R1
SYMATTR Value 30k
SYMBOL voltage 448 352 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -13 142 Left 2
SYMATTR Value 1.25
SYMATTR InstName V17
TEXT -96 248 Left 2 ;.tran 5m *Solo un ciclo
TEXT -96 408 Left 2 !.param tperiodo = 5m
TEXT -96 488 Left 2 !.param treset1 = 0.25m
TEXT -96 464 Left 2 !.param ttransfer1 = 0.20m
TEXT -96 336 Left 2 !.include IEE3433Lib_TT.sp
TEXT -96 632 Left 2 !.param rowselect2 = 4m
TEXT -96 360 Left 2 !.param Lmin = 0.6u, W = 3u, Ld=1.2u
TEXT -96 512 Left 2 !.param treset2 = 2.5m
TEXT -96 608 Left 2 !.param ttransfer2 = 3m
TEXT 1112 376 Left 2 !.param tswcurrent = 3m
TEXT 1112 400 Left 2 !.param current1 = 100p, current2= 50p, current3=10p, current4=0p
TEXT 1112 224 Left 2 !.MEAS TRAN vout1 FIND V(out) AT 4.8m
TEXT 1112 256 Left 2 !.MEAS TRAN vout2 FIND V(out) AT 9.8m
TEXT 1112 288 Left 2 !.MEAS TRAN vout3 FIND V(out) AT 14.8m
TEXT 1112 320 Left 2 !.MEAS TRAN vout4 FIND V(out) AT 19.8m
TEXT 1112 352 Left 2 !.param currentsweep=100p
TEXT -96 280 Left 2 ;.tran 20m * Cuatro ciclos
TEXT 1104 -456 Left 2 ;Photocurrent
TEXT -96 656 Left 2 !.param tssampleo = 4.1m
TEXT -96 680 Left 2 !.param tonsignal = 0.4m
TEXT -96 560 Left 2 !.param trsampleo = 2.8m
TEXT -96 584 Left 2 !.param tonreset = 0.1m
TEXT -96 536 Left 2 !.param rowselect1 = 2.5m
TEXT -96 384 Left 2 !.param Wp1 = 60u, Wp2 = 10u
TEXT -96 704 Left 2 !.param tlectura = 4.7m
TEXT -48 136 Left 2 !.op
RECTANGLE Normal 2240 176 1088 -480 2
